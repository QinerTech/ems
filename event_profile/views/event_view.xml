<?xml version="1.0" encoding="utf-8"?>
    <openerp>
        <data>
            <record model="ir.ui.view" id="view_event_form_extend_event">
                <field name="name">event.event.extended.form</field>
                <field name="model">event.event</field>
                <field name="inherit_id" ref="event.view_event_form" />
                <field name="arch" type="xml">
                    <xpath expr="//header" position="replace">
                        <header>
                            <button string="Confirm Event" name="button_confirm" states="draft" type="object" class="oe_highlight" groups="event_profile.group_event_user" />
                            <button string="Finish Event" name="button_done" states="confirm" type="object" class="oe_highlight" groups="event_profile.group_event_user" />
                            <button string="Set To Draft" name="button_draft" states="cancel,done" type="object" groups="event_profile.group_event_user" />
                            <button string="Cancel Event" name="button_cancel" states="draft,confirm" type="object" groups="event_profile.group_event_user" />
                            <field name="state" widget="statusbar" statusbar_visible="draft,confirm,done" />
                        </header>
                    </xpath>
                    <xpath expr="//field[@name='user_id']" position="replace">
                    </xpath>
                    <xpath expr="//field[@name='event_type_id']" position="replace">
                    </xpath>
                    <xpath expr="//sheet/div[1]" position="after">
                        <field name="event_code" placeholder="Event ID" />
                    </xpath>
                    <xpath expr="//field[@name='date_tz']" position="before">
                        <field name="lang" />
                    </xpath>
                    <xpath expr="//field[@name='address_id']" position="replace">
                        <field name="event_purpose"/>
                        <field name="event_type_id" />
                        <field name="level" />
                        <field name="venue" />
                        <field name="address_id" options="{ 'no_create':True, 'no_open':True}" />
                    </xpath>
                    <xpath expr="//field[@name='organizer_id']" position="replace">
                        <field name="organizer_id" invisible='1'/>
                        <field name="organization_id" />
                        <field name="deadline" />
                        <field name="user_id" />
                        <field name="create_date" readonly="1"/>
                        <!-- <field name="create_uid"  readonly="1"/> -->
                        <field name="write_date"  readonly="1"/>
                        <!-- <field name="write_uid"  readonly="1"/> -->
                    </xpath>
                    <xpath expr="//field[@name='date_begin']" position="before">
                        <field name="main_brand"/>
                        <field name="brands" widget="many2many_tags"/>
                        <field name="departments" widget="many2many_tags"/>
                    </xpath>
                    <xpath expr="//notebook" position="inside">

                        <page string="Travel Info" groups="event_profile.group_event_user,event_profile.group_event_admin">
                            <field name='travel' attrs="{'readonly':1}">
                                <tree editable="bottom">
                                    <field name='registration' />
                                    <field name='travel_departure_date' />
                                    <field name='travel_departure' />
                                    <field name='travel_destionation' />
                                    <field name='travel_method' />
                                    <field name='freight' />
                                </tree>
                            </field>
                        </page>
                        <page string="Hotel Info"  groups="event_profile.group_event_user,event_profile.group_event_admin">
                            <field name='hotel' attrs="{'readonly':1}">
                                <tree editable="bottom">
                                    <field name='registration' />
                                    <field name='hotel_reservation_start_date' />
                                    <field name='hotel_room' />
                                    <field name='reversed_days' />
                                    <!-- <field name='hotel_address'  /> -->
                                </tree>
                            </field>
                        </page>
                        <page string="Service Items"  groups="event_profile.group_event_user,event_profile.group_event_admin">
                            <field name='contract' attrs="{'readonly':1}">
                                <tree editable="bottom">
                                    <field name='speaker' />
                                    <field name='event_track' />
                                    <field name='service_type' />
                                    <field name='service_fee' />
                                    <field name='serivce_deliverable' />
                                    <field name='resonable_requirement' />
                                </tree>
                            </field>
                        </page>
                    </xpath>
                </field>
            </record>

            <record model="ir.ui.view" id="view_event_tree">
                <field name="name">event.event.tree</field>
                <field name="model">event.event</field>
                <field name="inherit_id" ref="event.view_event_tree" />
                <field name="arch" type="xml">
                    <xpath expr="//field[@name='name']" position="before" >
                        <field name="event_code"/>
                    </xpath>
                </field>
            </record>

            <record model="ir.ui.view" id="view_event_kanban">
                <field name="name">event.event.kanban</field>
                <field name="model">event.event</field>
                <field name="inherit_id" ref="event.view_event_kanban" />
                <field name="arch" type="xml">
                    <xpath expr="//kanban/templates//field[@name='name']" position="before" >
                        <field name="event_code"/>
                    </xpath>
                </field>
            </record>

            <record model="ir.ui.view" id="view_event_calendar">
                <field name="name">event.event.kanban</field>
                <field name="model">event.event</field>
                <field name="inherit_id" ref="event.view_event_calendar" />
                <field name="arch" type="xml">
                    <xpath expr="//field[@name='name']" position="before" >
                        <field name="event_code"/>
                    </xpath>
                </field>
            </record>

            <record model="ir.ui.view" id="view_event_form_extend_website_event">
                <field name="name">event.event.website.extend.form</field>
                <field name="model">event.event</field>
                <field name="inherit_id" ref="website_event.view_event_sale_form" />
                <field name="arch" type="xml">
                    <xpath expr="//button[@name='website_publish_button']" position="replace" > </xpath>
                    <xpath expr="//field[@name='twitter_hashtag']" position="replace" > </xpath>
                    <xpath expr="//button[@states='confirm']" position="replace" > </xpath>
                    <xpath expr="//button[@states='done']" position="replace" > </xpath>
                </field>
            </record>

            <record model="ir.ui.view" id="view_event_form_inherit_ticket_extend">
                <field name="name">view_event_form_inherit_tichet.extend</field>
                <field name="model">event.event</field>
                <field name="inherit_id" ref="event_sale.view_event_form_inherit_ticket" />
                <field name="arch" type="xml">
                    <xpath expr="//field[@name='price']" position="replace" > </xpath>
                    <xpath expr="//page" position="attributes" >
                        <attribute name="string">Attendance</attribute>
                    </xpath>
                    <xpath expr="//field[@name='event_ticket_ids']" position="replace" >
                        <field name="event_ticket_ids" context="{'default_name': name}">
                            <tree string="Tickets" editable="bottom">
                                <field name="name"  readonly="1" invisible="True"/>
                                <field name="product_id" context="{'default_event_ok':1}" options="{ 'limit':25, 'no_quick_create':True, 'no_create_edit':True, 'no_open':True}" />
                                <field name="deadline" invisible="True" />
                                <field name="seats_max" sum='Max' />
                                <field name="seats_reserved" readonly="1" sum='Reserved'/>
                                <field name="seats_unconfirmed" readonly="1" sum='Unconfirmed' />
                            </tree>
                        </field>
                    </xpath>

                </field>
            </record>

            <record id="view_event_event_ticket_form" model="ir.ui.view">
                <field name="name">event.event.ticket.form</field>
                <field name="model">event.event.ticket</field>
                <field name="arch" type="xml">
                    <form string="Attendee Quota" create="0" delete="0" edit="0">
                        <sheet>
                            <group>
                                <group>
                                    <field name="name" readonly="1" />
                                    <field name="deadline" readonly="1" />
                                    <field name="seats_availability" readonly="1" />
                                </group>
                                <group>
                                    <field name="seats_max" readonly="1" />
                                    <field name="seats_reserved" readonly="1" />
                                    <field name="seats_available" readonly="1" />
                                    <field name="seats_unconfirmed" readonly="1" />
                                    <field name="seats_used" readonly="1" />
                                </group>
                            </group>
                        </sheet>
                    </form>
                </field>
            </record>

            <record model="ir.ui.view" id="view_event_form_website_tracks_extend">
                <field name="name">Event Tracks</field>
                <field name="model">event.event</field>
                <field name="inherit_id" ref="website_event_track.view_event_form" />
                <field name="arch" type="xml">
                    <xpath expr="//field[@name='show_menu']" position="attributes">
                        <attribute name="invisible">True</attribute>
                    </xpath>
                    <xpath expr="//field[@name='show_tracks']" position="attributes">
                        <attribute name="invisible">True</attribute>
                    </xpath>
                    <xpath expr="//field[@name='show_track_proposal']" position="attributes">
                        <attribute name="invisible">True</attribute>
                    </xpath>
                    <xpath expr="//label[@for='show_track_proposal']" position="attributes">
                        <attribute name="invisible">True</attribute>
                    </xpath>
                    <xpath expr="//label[@for='show_tracks']" position="attributes">
                        <attribute name="invisible">True</attribute>
                    </xpath>
                    <xpath expr="//label[@for='show_menu']" position="attributes">
                        <attribute name="invisible">True</attribute>
                    </xpath>
                    <xpath expr="//div[@name='button_box']/button[last()]" position="replace">
                    </xpath>
                </field>
            </record>
            <record model="ir.ui.view" id="view_event_registration_form">
                <field name="name">event.registration.form.extended</field>
                <field name="model">event.registration</field>
                <field name="inherit_id" ref="event.view_event_registration_form" />
                <field name="arch" type="xml">
                    <xpath expr="//header" position="replace">
                        <header>

                            <button name="confirm_registration" string="Confirm" states="draft" type="object" class="oe_highlight" groups="event_profile.group_event_user, event_profile.group_event_user_nominator" />
                            <button name="button_reg_close" string="Attended" states="open" type="object" class="oe_highlight" groups="event_profile.group_event_user, event_profile.group_event_user_nominator" />
                            <button string="Set To Unconfirmed" name="do_draft" states="cancel,done" type="object" groups="event_profile.group_event_user, event_profile.group_event_user_nominator" />
                            <button name="button_reg_cancel" string="Cancel Registration" states="draft,open" type="object" groups="event_profile.group_event_user, event_profile.group_event_user_nominator" />
                            <field name="state" nolabel="1" colspan="2" widget="statusbar" statusbar_visible="draft,open,done"/>
                        </header>
                    </xpath>

                    <xpath expr="//sheet" position="inside">
                        <group name="sponsorship" string="Sponsorship Information">
                            <field name='travel'>
                                <tree editable="bottom">
                                    <!-- <field name='partner' /> -->
                                    <field name='travel_departure_date' />
                                    <field name='travel_departure' />
                                    <field name='travel_destionation' />
                                    <field name='travel_method' />
                                    <field name='freight' />
                                </tree>
                            </field>
                            <field name='hotel'>
                                <tree editable="bottom">
                                    <!-- <field name='partner' /> -->
                                    <field name='hotel_reservation_start_date' />
                                    <field name='hotel_room' />
                                    <field name='reversed_days' />
                                    <!-- <field name='hotel_address'  context="{'search_default_hotel':1, 'default_hotel':1}"/> -->
                                </tree>
                            </field>
                        </group>
                        <group>
                            <field name='hotel_budget' invisible='True' />
                            <field name='travel_budget' invisible='True' />
                            <field name='sponsorship_amount' />
                        </group>
                    </xpath>

                    <xpath expr="//field[@name='partner_id']" position="replace">
                    </xpath>
                    <xpath expr="//field[@name='name']" position="replace">
                        <field name='partner_id'  attrs="{'readonly':[('state', '!=', 'draft')]} " domain="[('company_type','=','person'), ('type','=','contact')]" context="{'event_id': event_id}"  options="{ 'no_create_edit':True}"/>
                        <field name="name" />
                        <field name="is_speaker"  invisible="1"/>
                    </xpath>
                    <xpath expr="//field[@name='event_id']" position="after">
                        <field name="venue" />
                        <field name="user_id" />
                    </xpath>
                </field>
            </record>
             <record model="ir.ui.view" id="view_event_registration_tree">
                <field name="name">event.registration.tree</field>
                <field name="model">event.registration</field>
                <field name="inherit_id" ref="event.view_event_registration_tree" />
                <field name="arch" type="xml">
                    <xpath expr="//field[@name='name']" position="replace">
                        <field name='phone'/>
                    </xpath>

                </field>
            </record>

            <record model="ir.ui.view" id="view_registration_search">
                <field name="name">event.registration.search</field>
                <field name="model">event.registration</field>
                <field name="inherit_id" ref="event.view_registration_search" />
                <field name="arch" type="xml">
                    <xpath expr="//filter[@name='expected']" position="after">
                        <filter string="Speaker" name="speaker" domain="[('is_speaker', '=', True)]" />
                    </xpath>
                </field>
            </record>


            <record model="ir.actions.act_window" id="event.act_event_registration_from_event">
                <field name="view_mode">tree,form,graph</field>
            </record>

            <record model="ir.ui.view" id="view_event_registration_ticket_form_extend">
                 <field name="name">event.registration.ticket.form.extend</field>
                <field name="model">event.registration</field>
                <field name="inherit_id" ref="event_sale.view_event_registration_ticket_form" />
                <field name="arch" type="xml">
                    <xpath expr="//group[last()]" position="replace">
                    </xpath>
          <!--           <xpath expr="//field[@name='sale_order_id']" position="replace">
                    </xpath>
                    <xpath expr="//field[@name='origin']" position="replace">
                    </xpath>
                    <xpath expr="//field[@name='sale_order_line_id']" position="replace">
                    </xpath> -->
                </field>
            </record>
            <record model="ir.ui.view" id="view_event_track_form_extend">
                <field name="name">event.track.form.extended</field>
                <field name="inherit_id" ref="website_event_track.view_event_track_form" />
                <field name="model">event.track</field>
                <field name="arch" type="xml">
                    <xpath expr="//sheet/group" position="replace">
                        <group>
                            <group>
                                <!-- <field name="speaker_id"  context="{'search_default_speaker':1, 'default_speaker':1}"  /> -->
                                <field name="registration_id"  domain="[('is_speaker','=',True), ( 'event_id','=', event_id)]"  context="{'search_default_speaker':1, 'default_event_id': event_id}" />
                                <field name="partner_name"/>
                                <field name="oversea" readonly="1"/>
                                <field name="partner_phone"/>
                                <field name="partner_email"/>
                                <field name="identifier_id" password="True" placeholder="例如：身份证320000XXXXXXXXXXXXXXXXX/护照9080XXXXXXXXXXXX" />
                                <field name="bank_account" password="True" placeholder="例如：交通银行南京路支行600028XXXXXXXXXXXX"  />
                            </group>
                            <group>

                                <field name="date" invisible='1'/>
                                <label for="nbr_hour"/>
                                <div class="o_row">
                                    <field name="nbr_hour" />:
                                    <field name="nbr_minute" />
                                </div>
                                <field name="user_id"/>
                                <field name="tag_ids" widget="many2many_tags"/>
                            </group>
                        </group>
                    </xpath>

                    <xpath expr="//button[@name='website_publish_button']" position="replace" ></xpath>
                    <xpath expr="//field[@name='name']" position="attributes" >
                        <attribute name="placeholder">例如：修美乐的应用</attribute>
                    </xpath>
                    <xpath expr="//sheet" position="inside">
                        <notebook>
                            <page string="Service Items" name="service_items">
                                <field name="event_track_contract">
                                    <tree editable="bottom">
                                        <field name="service_type" />
                                        <field name="service_description" />
                                        <field name="service_rate" />
                                        <field name="service_fee" />
                                        <field name="serivce_deliverable" />
                                        <field name="resonable_requirement" />
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </xpath>
                </field>
            </record>

             <record model="ir.ui.view" id="view_event_track_tree">
            <field name="name">event.track.tree</field>
            <field name="model">event.track</field>
                <field name="inherit_id" ref="website_event_track.view_event_track_tree" />
                <field name="arch" type="xml">
                    <xpath expr="//field[@name='name']" position="after">
                        <field name='registration_id'/>
                    </xpath>
                </field>
            </record>

            <record model="ir.actions.act_window" id="website_event_track.action_event_track">
                <field name="view_mode">tree,form,graph</field>
                <field name="context">{'search_default_message_needaction': 1}</field>
            </record>

            <record model="ir.actions.act_window" id="website_event_track.action_event_track_from_event">
                <field name="view_mode">tree,form,graph</field>
                 <field name="context">{'search_default_event_id': active_id, 'default_event_id': active_id}</field>
            </record>

        <record model="ir.ui.view" id="view_event_service_type_form">
            <field name="name">Event Service Type</field>
            <field name="model">event.service.type</field>
            <field name="arch" type="xml">
                <form string="Event Service Type">
                    <sheet>
                        <group>
                            <group>
                                <field name="name"/>
                            </group>
                            <group></group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record model="ir.ui.view" id="view_event_service_type_tree">
            <field name="name">Event Service Type</field>
            <field name="model">event.service.type</field>
            <field name="arch" type="xml">
                <tree string="Event Service Type">
                    <field name="name"/>
                </tree>
            </field>
        </record>
        <record model="ir.actions.act_window" id="action_event_service_type">
            <field name="name">Event Service Type</field>
            <field name="res_model">event.service.type</field>
        </record>

         <!-- EVENTS/CONFIGURATION/EVENT brand -->
        <record model="ir.ui.view" id="view_event_brand_form">
            <field name="name">Event Brand</field>
            <field name="model">event.brand</field>
            <field name="arch" type="xml">
                <form string="Event Brand">
                    <sheet>
                        <group>
                            <group>
                            <field name="image_medium"   widget="image"/>
                            <field name="name"/>
                            <!-- <field name="brand_type"/> -->
                        </group>
                        <group></group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record model="ir.ui.view" id="view_event_brand_tree">
            <field name="name">Event Brand</field>
            <field name="model">event.brand</field>
            <field name="arch" type="xml">
                <tree string="Event Brand">
                   <field name="name"/>
                   <!-- <field name="brand_type"/> -->
                </tree>
            </field>
        </record>
        <record model="ir.actions.act_window" id="action_event_brand">
            <field name="name">Event Brands</field>
            <field name="res_model">event.brand</field>
        </record>



        <menuitem name="Events Category" id="menu_event_type" action="event.action_event_type" parent="event.menu_event_configuration"/>

        <menuitem name="Brands" id="menu_event_brand"
            action="action_event_brand" parent="event.menu_event_configuration"  sequence="11"/>

        <menuitem name="Service Type" id="menu_event_service_type"
            action="action_event_service_type" parent="event.menu_event_configuration" sequence="13" />

        <menuitem name="Users"
          id="event_menu_users"
          parent="event.menu_event_configuration"
          action="base.action_res_users"  sequence="16"/>

        <record model="ir.ui.menu" id="event.event_main_menu">
           <field name="groups_id"
                   eval="[(6,0,[ref('base.group_user')])]"/>
        </record>

        <record model="ir.ui.menu" id="event.menu_event_event">
           <field name="groups_id"
                   eval="[(6,0,[ref('base.group_user')])]"/>
        </record>

        <record model="ir.ui.menu" id="event.menu_action_registration">
           <field name="groups_id"
                   eval="[(6,0,[ref('base.group_no_one')])]"/>
        </record>

        <record model="ir.ui.menu" id="website_event_track.menu_event_track">
           <field name="groups_id"
                   eval="[(6,0,[ref('base.group_no_one')])]"/>
        </record>

        <record model="ir.ui.menu" id="event.menu_event_global_settings">
           <field name="groups_id"
                   eval="[(6,0,[ref('base.group_system')])]"/>
        </record>

        <record model="ir.ui.menu" id="website.menu_website">
           <field name="groups_id"
                   eval="[(6,0,[ref('base.group_system')])]"/>
        </record>

        <record model="ir.ui.menu" id="website.menu_website_configuration">
           <field name="groups_id"
                   eval="[(6,0,[ref('base.group_system')])]"/>
        </record>

        <record model="ir.ui.menu" id="base.menu_administration">
           <field name="groups_id"
                   eval="[(6,0,[ref('base.group_system')])]"/>
        </record>

        <record model="ir.ui.menu" id="mail.mail_channel_menu_root_chat">
           <field name="groups_id"
                   eval="[(6,0,[ref('base.group_system')])]"/>
        </record>

<!--         <record model="ir.ui.menu" id="link_tracker.menu_url_shortener_links">
           <field name="groups_id"
                   eval="[(6,0,[ref('base.group_system')])]"/>
        </record> -->

        <!-- <record model="ir.config_parameter" id="web_m2x_options_create">
            <field name="key">web_m2x_options.create</field>
            <field name="value">False</field>
        </record>
        <record model="ir.config_parameter" id="web_base_url_freeze">
            <field name="key">web.base.url.freeze</field>
            <field name="value">True</field>
        </record> -->
    </data>

    <data noupdate="1">

        <delete model="ir.ui.menu" id="website_event_track.menu_event_sponsor_type"/>

        <delete model="ir.actions.report.xml" id="event.report_event_registration_badge"/>

        <delete model="ir.ui.menu" id="website_event_track.menu_event_track_location"/>

    </data>
</openerp>
